A federal judge has ordered Boeing to appear in court on a felony charge stemming from crashes of two 737 Max jets that killed almost 350 people. The ruling by a judge in Texas came after relatives of some of the victims said the government violated their rights by reaching a settlement with Boeing without first notifying the families. The largest plane manufacturer struck a deal with the Justice Department under which it paid $2.5billion to avoid prosecution on a criminal count of defrauding federal regulators who approved the 737 Max. The new ruling threatens to unravel that agreement. Most of the money from the initial settlement went to airlines that couldn't use their Max jets for nearly two years after the planes were grounded worldwide. Boeing agreed to pay a $243.6million fine and create a $500million fund to compensate victims' families. READ MORE: Doomed plane passengers' final moments caught in Facebook Live before crash killed 68 The two crashes at the heart of the legal dispute killed a total of 346 people, and left all Max jets grounded worldwide for nearly two years. The first Boeing Max 737 crashed in Indonesia in October 2018, killing 189, and another crashed five months later in Ethiopia, killing 157. They were cleared to fly again after Boeing overhauled an automated flight-control system that activated erroneously in both crashes. DON'T MISSAlec Baldwin vows to 'fight' manslaughter charge [LATEST]Biden on brink as shutdown threatens US with default [REPORT]Kohberger was likely motivated by sexual ‘arousal’ [INSIGHT] In a court filing in November, the Justice Department said it did not oppose an arraignment for Boeing, but said undoing the agreement "would impose serious hardships on the parties and the many victims who have received compensation". US District Court Judge Reed O’Connor has ordered Boeing to send a representative to his courtroom in Fort Worth January 26 for arraignment.